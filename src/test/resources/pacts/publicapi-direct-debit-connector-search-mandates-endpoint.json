{
  "consumer": {
    "name": "publicapi"
  },
  "provider": {
    "name": "connector"
  },
  "interactions": [
    {
      "description": "search mandates by parameters",
      "providerStates": [
        {
          "name": "a gateway account with an external id and a confirmed mandate searchable by all parameters",
          "params": {
            "gateway_account_id": "2po9ycynwq8yxdgg2qwq9e9qpyrtre",
            "mandate_id": "jkdjsvd8f78ffkwfek2a",
            "unique_identifier": "AAAAA",
            "charge_id": "charge97837509646393e3A",
            "reference": "a reference",
            "state":"pending",
            "bank_statement_reference": "a bstatement ref",
            "name":"a name",
            "email": "rory@example.com",
            "from_date":"2018-07-11T12:30:48.317Z",
            "to_date": "2020-07-11T12:30:48.317Z",
            "page":"1",
            "display_size": "1"
          }
        }
      ],
      "request": {
        "method": "GET",
        "path": "/v1/api/accounts/123456/mandates",
        "query": "email=rory@example.com&name=a%20name&state=pending&bank_statement_reference=a%20bstatement%20ref&reference=a%20reference&from_date=2018-07-11T12:30:48.317Z&to_date=2020-07-11T12:30:48.317Z&page=1&display_size=1"
      },
      "response": {
        "status": 200,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "total": 1,
          "count": 1,
          "page": 1,
          "results": [
            {
              "mandate_id": "obck2jlpu4erf3j2itfkp215ld",
              "provider_id": "GOVERNMENTDI-ZY79J",
              "reference": "aASasa",
              "return_url": "https://www.example.com",
              "payment_provider": "paymentProviderId",
              "bank_statement_reference": "AAAA1111",
              "created_date": "2019-07-11T12:30:48.317Z",
              "payer": {
                "name": "Mr Test",
                "email": "rory@example.com"
              },
              "state": {
                "status": "a status",
                "details": "cause_details_from_gocardless"
              },
              "links": {
                "self": {
                  "href": "https://publicapi.payments.service.gov.uk/v1/directdebit/mandates/obck2jlpu4erf3j2itfkp215ld",
                  "method": "GET"
                }
              }
            }
          ],
          "_links": {
            "self": {
              "href": "https://publicapi.payments.service.gov.uk/v1/directdebit/mandates?page=1&display_size=500"
            },
            "first_page": {
              "href": "https://publicapi.payments.service.gov.uk/v1/directdebit/mandates?page=1&display_size=500"
            },
            "last_page": {
              "href": "https://publicapi.payments.service.gov.uk/v1/directdebit/mandates?page=1&display_size=500"
            }
          }
        },
        "matchingRules": {
          "body": {
            "$.results[*].links[0].href": {
              "matchers": [
                {
                  "regex": "https:.*\/mandates\/.*"
                }
              ]
            },
            "$._links.self.href": {
              "matchers": [
                {
                  "regex": "http.*:\/\/.*\/v1\/api\/accounts\/123456\/mandates\\?page=1.*"
                }
              ]
            },
            "$._links.last_page.href": {
              "matchers": [
                {
                  "regex": "http.*:\/\/.*\/v1\/api\/accounts\/123456\/mandates\\?page=1.*"
                }
              ]
            },
            "$._links.first_page.href": {
              "matchers": [
                {
                  "regex": "http.*:\/\/.*\/v1\/api\/accounts\/123456\/mandates\\?page=1.*"
                }
              ]
            },
            "$.results[*].mandate_id": {
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.results[*].provider_id": {
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.results[*].reference": {
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.results[*].return_url": {
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.results[*].payment_provider": {
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.results[*].bank_statement_reference": {
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.results[*].created_date": {
              "matchers": [
                {
                  "date": "yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"
                }
              ]
            },
            "$.results[*].payer.name": {
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.results[*].payer.email": {
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.results[*].state.status": {
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.results[*].state.details": {
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          }
        }
      }
    }
  ],
  "metadata": {
    "pact-specification": {
      "version": "3.0.0"
    },
    "pact-jvm": {
      "version": "3.5.16"
    }
  }
}
